{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useEffect}from'react';import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Button from\"react-native-web/dist/exports/Button\";import Image from\"react-native-web/dist/exports/Image\";import FlatList from\"react-native-web/dist/exports/FlatList\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import DayForecast from\"./DayForecast\";import buoy from\"../images/buoy-icon-28.png\";import RNPickerSelect from'react-native-picker-select';var SpotDetails=function SpotDetails(_ref){var route=_ref.route,navigation=_ref.navigation;var currentTime=new Date().getHours();var image={uri:'https://i.imgur.com/Zs5yNSP.png'};var forecastData=route.params.data;var units=route.params.units;var _forecastData$current=forecastData[currentTime],waveHeight=_forecastData$current.waveHeight,swellHeight=_forecastData$current.swellHeight,swellPeriod=_forecastData$current.swellPeriod,swellDirection=_forecastData$current.swellDirection;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),buoyData=_useState2[0],setBuoy=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState('icon'),_useState6=_slicedToArray(_useState5,2),selectedModel=_useState6[0],setModel=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),currentWindSpeed=_useState8[0],setSpeed=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),currentWindDir=_useState10[0],setWindDir=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),daysArr=_useState12[0],setDays=_useState12[1];var _useState13=useState({currentWaveHeight:'',currentSwellHeight:'',currentSwellPeriod:'',currentSwellDirection:'',currentWindSpeed:'',currentWindDir:''}),_useState14=_slicedToArray(_useState13,2),myState=_useState14[0],setMyState=_useState14[1];var buoyFetch=function buoyFetch(){var response,jsonData,nowCastTime;return _regeneratorRuntime.async(function buoyFetch$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetch('https://swellbyte.herokuapp.com/buoy'));case 2:response=_context.sent;_context.next=5;return _regeneratorRuntime.awrap(response.json());case 5:jsonData=_context.sent;nowCastTime=forecastData[currentTime];setMyState(_objectSpread({},nowCastTime));if(selectedModel==='dwd'||selectedModel==='meteo'){setSpeed(nowCastTime.windSpeed.sg);setWindDir(nowCastTime.windDirection.sg);}else{setWindDir(nowCastTime.windDirection[selectedModel]);setSpeed(nowCastTime.windSpeed[selectedModel]);}setDays(dayGenerator(forecastData));setBuoy(jsonData);setIsLoading(false);return _context.abrupt(\"return\");case 13:case\"end\":return _context.stop();}}},null,null,null,Promise);};var dayGenerator=function dayGenerator(input){var allData=_toConsumableArray(input);var res=[];for(var i=0;i<allData.length/24;i++){res.push(allData.splice(0,24));}return res;};useEffect(function(){buoyFetch();},[]);function getCardinalDirection(angle){var directions=['N↓','NE↙','E←','SE↖','S↑','SW↗','W→','NW↘'];return directions[Math.round(angle/45)%8];}return React.createElement(ImageBackground,{source:image,style:styles.image},React.createElement(SafeAreaView,null,isLoading?React.createElement(Text,null):React.createElement(SafeAreaView,{style:styles.safeArea},React.createElement(View,{style:styles.currentContainer},React.createElement(View,{style:styles.wavesAndWind},React.createElement(View,{style:styles.currentLeft},React.createElement(Text,{style:{color:'white',fontSize:25,fontWeight:'bold',width:95,margin:5,textAlign:'left'}},units==='eu'?waveHeight[selectedModel].toFixed(1)+\"m\":(waveHeight[selectedModel]*3.28).toFixed(1)+\"ft\"),React.createElement(Text,{style:{color:'white',fontSize:15,fontWeight:'bold',width:124,margin:5,textAlign:'left',paddingLeft:15}},units==='eu'?swellHeight[selectedModel].toFixed(1)+\"m@\"+Math.floor(swellPeriod[selectedModel])+\"s\":Math.round(waveHeight[selectedModel]*3.28)+\"ft@\"+Math.round(swellPeriod[selectedModel])+\"s\"),React.createElement(View,{style:{flexDirection:'row'}},React.createElement(Text,{style:{color:'white',fontSize:20,fontWeight:'bold',width:65,margin:5}},getCardinalDirection(swellDirection[selectedModel])))),React.createElement(View,{style:styles.currentRight},React.createElement(Text,{style:{color:'white',fontSize:25,fontWeight:'bold',width:95,margin:5}},units==='eu'?Math.round(currentWindSpeed*3.6)+\"km/h\":Math.round(currentWindSpeed*2.23)+\"mph\"),React.createElement(Text,{style:{color:'white',fontSize:15,fontWeight:'bold',width:65,margin:5}},units==='eu'?Math.round(currentWindSpeed*3.6)+5+\"km/h\":Math.round(currentWindSpeed*2.23)+5+\"mph\"),React.createElement(View,{style:{flexDirection:'row'}},React.createElement(Text,{style:{color:'white',fontSize:20,fontWeight:'bold',width:60,margin:5}},getCardinalDirection(currentWindDir-90))))),React.createElement(View,{style:styles.buoyButtonView},React.createElement(View,{style:styles.buoy},React.createElement(Image,{source:buoy,style:{width:45,height:45}}),React.createElement(Text,{style:{color:'white',fontSize:15,fontWeight:'bold',width:124,margin:5}},units==='eu'?buoyData.height+\"m@\"+Math.round(+buoyData.period)+\"sec\":Math.round(buoyData.height*3.2)+\"ft@\"+Math.round(+buoyData.period)+\"sec\")),React.createElement(View,{style:styles.button},React.createElement(RNPickerSelect,{style:picker,value:selectedModel,onValueChange:function onValueChange(value){return value==null?setModel('icon'):setModel(value);},items:[{label:'icon',value:'icon'},{label:'meteo',value:'meteo'},{label:'noaa',value:'noaa'},{label:'SwellByte',value:'sg'}]})))),React.createElement(View,{style:styles.flatListCont},React.createElement(FlatList,{data:daysArr,renderItem:function renderItem(_ref2){var item=_ref2.item;return item[6].waveHeight[selectedModel]?React.createElement(DayForecast,{dayData:item,model:selectedModel,units:units}):null;},keyExtractor:function keyExtractor(item){return item[0]._id;}})))));};export default SpotDetails;var windowWidth=Dimensions.get('window').width;var windowHeight=Dimensions.get('window').height;var styles=StyleSheet.create({image:{flex:1,resizeMode:'cover',color:'white'},safeArea:{flexDirection:'column',justifyContent:'center',alignItems:'center',color:'white'},currentContainer:{flexDirection:'column',width:windowWidth-10,height:windowHeight*.25,justifyContent:'flex-start',alignItems:'center',color:'white'},wavesAndWind:{flexDirection:'row',height:127,width:367,color:'white'},currentLeft:{flex:1,flexDirection:'column',width:50,height:123,justifyContent:'center',alignItems:'center',color:'white'},currentRight:{flex:1,flexDirection:'column',width:50,height:123,justifyContent:'center',alignItems:'center',color:'white'},dayContainer:{flexDirection:'row',width:windowWidth-10,height:160,color:'white'},buoyButtonView:{flexDirection:'row',width:366,height:60,color:'white'},buoy:{flexDirection:'row',flex:1,height:55,width:20,justifyContent:'center',color:'white'},button:{flex:1,height:55,width:20,color:'white'},flatListCont:{marginTop:5,height:windowHeight*.75}});var picker={inputIOS:{color:'white',padding:5,fontSize:15,fontWeight:'bold',borderRadius:10,borderColor:'white',textAlign:'center',backgroundColor:'rgba(255, 255, 255, 0.45)'}};","map":{"version":3,"sources":["/Users/sean/Documents/swellByte1-0/SwellByteClient/components/SpotDetails.js"],"names":["React","useState","useEffect","DayForecast","buoy","RNPickerSelect","SpotDetails","route","navigation","currentTime","Date","getHours","image","uri","forecastData","params","data","units","waveHeight","swellHeight","swellPeriod","swellDirection","buoyData","setBuoy","isLoading","setIsLoading","selectedModel","setModel","currentWindSpeed","setSpeed","currentWindDir","setWindDir","daysArr","setDays","currentWaveHeight","currentSwellHeight","currentSwellPeriod","currentSwellDirection","myState","setMyState","buoyFetch","fetch","response","json","jsonData","nowCastTime","windSpeed","sg","windDirection","dayGenerator","input","allData","res","i","length","push","splice","getCardinalDirection","angle","directions","Math","round","styles","safeArea","currentContainer","wavesAndWind","currentLeft","color","fontSize","fontWeight","width","margin","textAlign","toFixed","paddingLeft","floor","flexDirection","currentRight","buoyButtonView","height","period","button","picker","value","label","flatListCont","item","_id","windowWidth","Dimensions","get","windowHeight","StyleSheet","create","flex","resizeMode","justifyContent","alignItems","dayContainer","marginTop","inputIOS","padding","borderRadius","borderColor","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { TouchableOpacity, StyleSheet, Text, View, SafeAreaView, ImageBackground, Dimensions, Button, Image, FlatList, ScrollView } from 'react-native';\nimport { EXPO_BUOY_DATA } from '@env';\nimport DayForecast from './DayForecast';\nimport buoy from '../images/buoy-icon-28.png'\nimport RNPickerSelect from 'react-native-picker-select';\n\nconst SpotDetails = ({ route, navigation}) => {\n  const currentTime = new Date().getHours();\n  const image = { uri: 'https://i.imgur.com/Zs5yNSP.png'};\n  const forecastData = route.params.data;\n  const units = route.params.units;\n  \n  const {\n    waveHeight,\n    swellHeight,\n    swellPeriod,\n    swellDirection,\n\n  } = forecastData[currentTime];\n  const [buoyData, setBuoy] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedModel, setModel] = useState('icon');\n  const [currentWindSpeed, setSpeed] = useState('');\n  const [currentWindDir, setWindDir] = useState('');\n  const [daysArr, setDays] = useState([]);\n  \n  const [myState, setMyState] = useState({\n    currentWaveHeight: '',\n    currentSwellHeight: '',\n    currentSwellPeriod: '',\n    currentSwellDirection: '',\n    currentWindSpeed: '',\n    currentWindDir: '',\n  })\n\n  const buoyFetch = async () => {\n    let response = await fetch('https://swellbyte.herokuapp.com/buoy');\n    let jsonData = await response.json();\n    const nowCastTime = forecastData[currentTime];\n    setMyState({...nowCastTime})\n    if (selectedModel === 'dwd' || selectedModel === 'meteo') {\n      setSpeed(nowCastTime.windSpeed.sg);\n      setWindDir(nowCastTime.windDirection.sg);\n    } else {\n      setWindDir(nowCastTime.windDirection[selectedModel]);\n      setSpeed(nowCastTime.windSpeed[selectedModel]);\n    }\n    setDays(dayGenerator(forecastData));    \n    setBuoy(jsonData);\n    \n    setIsLoading(false)\n    \n    return\n  }\n \n  const dayGenerator = (input) => {\n    const allData = [...input];\n    const res = [];\n    for (let i = 0; i < allData.length/24; i++) {\n      res.push(allData.splice(0,24))\n    }\n    return res;\n  }\n  \n  useEffect(() => {\n    buoyFetch()\n  }, [])\n\n  function getCardinalDirection(angle) {\n      const directions = ['N↓', 'NE↙', 'E←', 'SE↖', 'S↑', 'SW↗', 'W→', 'NW↘'];\n      //'N↑', 'NE↗', 'E→', 'SE↘', 'S↓', 'SW↙', 'W←', 'NW↖'\n      return directions[Math.round(angle / 45) % 8];\n    }\n    \n\n  return (\n    <ImageBackground source={image} style={styles.image}>\n      <SafeAreaView>\n      {isLoading ?\n        <Text></Text> :\n          <SafeAreaView style={styles.safeArea}>            \n            <View style={styles.currentContainer}>\n              <View style={styles.wavesAndWind}>\n                <View style={styles.currentLeft}>\n                  <Text style={{color: 'white', fontSize: 25, fontWeight: 'bold', width: 95, margin: 5, textAlign: 'left'}}>{units === 'eu' ? `${waveHeight[selectedModel].toFixed(1)}m` : `${(waveHeight[selectedModel]*3.28).toFixed(1)}ft` }</Text>\n                  <Text style={{color: 'white', fontSize: 15, fontWeight: 'bold', width: 124, margin: 5, textAlign: 'left', paddingLeft: 15}}>{units === 'eu' ? `${swellHeight[selectedModel].toFixed(1)}m@${Math.floor(swellPeriod[selectedModel])}s` : `${(Math.round(waveHeight[selectedModel]*3.28))}ft@${Math.round(swellPeriod[selectedModel])}s` }</Text>\n                  <View style={{flexDirection: 'row'}}>\n                  <Text style={{color: 'white', fontSize: 20, fontWeight: 'bold', width: 65, margin: 5}}>{getCardinalDirection(swellDirection[selectedModel])}</Text>\n                  </View>\n                </View>\n\n                <View style={styles.currentRight}>\n\n                  <Text style={{color: 'white', fontSize: 25, fontWeight: 'bold', width: 95, margin: 5}}>{units === 'eu' ? `${Math.round(currentWindSpeed*3.6)}km/h` : `${Math.round(currentWindSpeed*2.23)}mph` }</Text>\n                  <Text style={{color: 'white', fontSize: 15, fontWeight: 'bold', width: 65, margin: 5}}>{units === 'eu' ? `${Math.round(currentWindSpeed*3.6)+5}km/h` : `${Math.round(currentWindSpeed*2.23)+5}mph` }</Text>\n                  <View style={{flexDirection: 'row'}}>\n                  <Text style={{color: 'white', fontSize: 20, fontWeight: 'bold', width: 60, margin: 5}}>{getCardinalDirection(currentWindDir-90)}</Text>\n                </View>\n\n                </View>\n              </View >\n\n              <View style={styles.buoyButtonView}>\n                  \n                  <View style={styles.buoy}>\n                    <Image source={buoy} style={{width:45, height:45}} />\n                    <Text style={{color: 'white', fontSize: 15, fontWeight: 'bold', width: 124, margin: 5}}>{units === 'eu' ? `${buoyData.height}m@${Math.round(+buoyData.period)}sec` : `${Math.round(buoyData.height*3.2)}ft@${Math.round(+buoyData.period)}sec`}</Text>\n                  </View>\n                  \n\n                  <View style={styles.button}>\n                    <RNPickerSelect style={picker} value={selectedModel}\n                      onValueChange={(value) => value == null ? setModel('icon') : setModel(value)}\n                      items={[\n                          { label: 'icon', value: 'icon' },\n                          { label: 'meteo', value: 'meteo' },\n                          { label: 'noaa', value: 'noaa' },\n                          { label: 'SwellByte', value: 'sg' },\n                      ]}\n                    />\n                  </View>\n\n              </View>\n   \n            </View>\n            <View style={styles.flatListCont}>\n              <FlatList\n              data={daysArr}\n              renderItem={({item}) => item[6].waveHeight[selectedModel]?<DayForecast dayData={item} model={selectedModel} units={units}></DayForecast> : null}\n              keyExtractor={item => item[0]._id}\n            />\n            </View>\n\n          </SafeAreaView>\n      }\n      </SafeAreaView>\n    </ImageBackground>\n  )\n}\n\nexport default SpotDetails\nconst windowWidth = Dimensions.get('window').width;\nconst windowHeight = Dimensions.get('window').height;\n\nconst styles = StyleSheet.create({\n  image: {\n    flex: 1,\n    resizeMode: 'cover',\n    color: 'white',  \n  },\n  safeArea: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: 'white',\n\n  },\n  currentContainer: {\n    flexDirection: 'column',\n    width: windowWidth-10,\n\n    height: windowHeight*.25,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    color: 'white',\n  },\n  wavesAndWind: {\n    flexDirection: 'row',\n    height: 127,\n    width: 367,\n    color: 'white',\n  },\n  currentLeft: {\n    flex: 1,\n    flexDirection: 'column',\n    width: 50,\n    height: 123,\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: 'white',\n  },\n  currentRight: {\n    flex: 1,\n    flexDirection: 'column',\n    width: 50,\n    height: 123,\n    justifyContent: 'center',\n    alignItems: 'center',    \n    color: 'white',\n\n  },\n  dayContainer: {\n    flexDirection: 'row',\n    width: windowWidth-10,\n    height: 160,   \n    color: 'white',\n  },\n  buoyButtonView: {\n    flexDirection: 'row',\n    \n    width: 366,\n    height: 60,\n    color: 'white',\n  },\n  buoy: {\n    flexDirection: 'row',\n    flex: 1,\n    \n    height: 55,\n    width: 20,\n    justifyContent: 'center',\n    color: 'white',\n\n  },\n  button: {\n    flex: 1,\n    height: 55,\n    width: 20,\n    color: 'white',\n  },\n  flatListCont: {\n    marginTop: 5,\n    height: windowHeight*.75\n  },\n\n})\n\nconst picker = {\n  inputIOS: {\n    color: 'white',\n    padding: 5,\n    fontSize: 15,\n    fontWeight: 'bold',\n    borderRadius: 10,\n    borderColor: 'white',\n    textAlign: 'center',\n    backgroundColor: 'rgba(255, 255, 255, 0.45)',\n  }\n}"]},"metadata":{},"sourceType":"module"}